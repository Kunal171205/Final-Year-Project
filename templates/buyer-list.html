<!DOCTYPE html>
<html>
<head>
  <title>Raw Materials | Industrial Explorer</title>
  <link rel="stylesheet" href="{{url_for('static',filename='css/b2b.css')}}">
</head>
<body>

<header class="top-header">
  <div class="logo">Industrial Explorer</div>
  <nav class="top-nav">
    {# If logged in, show Profile + Logout, else show Login #}
        {% if session.get('role') == 'user' %}
            <a href="{{ url_for('home') }}">Home</a>
            <a href="{{ url_for('jobportal') }}">Job Portal</a>
            <a href="{{ url_for('workerprofile') }}">Profile</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        {% elif session.get('role') == 'business' %}
            <a href="{{ url_for('home') }}">Home</a>
            <a href="{{ url_for('b2bhome') }}">B2B Trade</a>
            <a href="{{ url_for('companyprofile') }}">Profile</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('jobportal') }}">Job Portal</a>
        <a href="{{ url_for('b2bhome') }}">B2B Trade</a>
            <a href="{{ url_for('logintype') }}">Login</a>
        {% endif %}
  </nav>
</header>

<section class="list-page">

  <h2 style="text-align: center; margin-bottom: 20px;">B2B Marketplace</h2>

  <!-- SELL ITEMS SECTION -->
  <h3 style="margin: 30px 0 15px 0; color: #333;">ðŸ“¦ Items for Sale</h3>
  {% if sell_items %}
    {% for item in sell_items %}
    <div class="trade-card" style="border-left: 4px solid #2e7d32;">
      <h3>SELL â€¢ {{ item.sell_name }}</h3>
      {% if item.sell_category %}
      <p><strong>Category:</strong> {{ item.sell_category }}</p>
      {% endif %}
      <p><strong>Quantity:</strong> {{ item.sell_quantity }}</p>
      <p><strong>Price:</strong> â‚¹{{ "%.2f"|format(item.sell_price) }}</p>
      {% if item.sell_location %}
      <p><strong>Location:</strong> {{ item.sell_location }}</p>
      {% endif %}
      <p><strong>Description:</strong> {{ item.sell_description[:100] }}{% if item.sell_description|length > 100 %}...{% endif %}</p>
      <p style="font-size: 0.9em; color: #666;">
        <strong>Posted:</strong> {{ item.sell_date.strftime('%Y-%m-%d') if item.sell_date else 'N/A' }}
      </p>

      <div class="actions">
        <a href="mailto:{{ item.posted_by }}" class="call">Contact Seller</a>
        <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Seller: {{ item.posted_by }}</p>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="trade-card">
      <p>No items for sale at the moment. Check back later!</p>
    </div>
  {% endif %}

  <!-- BUY REQUIREMENTS SECTION -->
  <h3 style="margin: 30px 0 15px 0; color: #333;">ðŸ›’ Buy Requirements</h3>
  {% if buy_items %}
    {% for item in buy_items %}
    <div class="trade-card" style="border-left: 4px solid #1976d2;">
      <h3>BUY â€¢ {{ item.buy_name }}</h3>
      {% if item.buy_category %}
      <p><strong>Category:</strong> {{ item.buy_category }}</p>
      {% endif %}
      <p><strong>Quantity Needed:</strong> {{ item.buy_quantity }}</p>
      <p><strong>Budget:</strong> {% if item.buy_budget %}â‚¹{{ "%.2f"|format(item.buy_budget) }}{% else %}Negotiable{% endif %}</p>
      {% if item.buy_location %}
      <p><strong>Location:</strong> {{ item.buy_location }}</p>
      {% endif %}
      <p><strong>Description:</strong> {{ item.buy_description[:100] }}{% if item.buy_description|length > 100 %}...{% endif %}</p>
      <p style="font-size: 0.9em; color: #666;">
        <strong>Posted:</strong> {{ item.buy_date.strftime('%Y-%m-%d') if item.buy_date else 'N/A' }}
      </p>

      <div class="actions">
        <a href="mailto:{{ item.posted_by }}" class="call">Contact Buyer</a>
        <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Buyer: {{ item.posted_by }}</p>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="trade-card">
      <p>No buy requirements posted at the moment. Check back later!</p>
    </div>
  {% endif %}

</section>

</body>
</html>
